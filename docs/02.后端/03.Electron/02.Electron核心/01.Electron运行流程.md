---
title: Electron运行流程
date: 2025-10-20 11:42:12
permalink: /pages/5db6b1/
categories:
  - 后端
  - Electron
  - Electron核心
tags:
  - 
---
Electron应用的运行流程基于Chromium的多进程架构，主要分为两种进程：主进程和渲染进程，每个进程承担不同的职责并通过IPC通信机制协同工作。

## 主进程
主进程是Electron应用的入口点，每个应用只有一个主进程，它在Node.js环境中运行，因此可以直接使用所有Node.js API。其主要职责包括：
1. **窗口管理**：通过`BrowserWindow`模块创建和管理应用窗口，每个窗口对应一个独立的渲染进程。例如：
   ```javascript
   const { BrowserWindow } = require('electron')
   const win = new BrowserWindow({ width: 800, height: 1500 })
   win.loadURL('https://github.com')
   ```
2. **应用生命周期控制**：通过`app`模块管理应用的生命周期事件（如退出、最小化等）。例如：
   ```javascript
   app.on('window-all-closed', () => {
     if (process.platform !== 'darwin') app.quit()
   })
   ```
3. **原生API调用**：调用与操作系统交互的原生功能（如菜单、对话框等）。

## 渲染进程
每个`BrowserWindow`实例都会创建一个独立的渲染进程，负责渲染窗口内容（HTML/CSS/JavaScript）。渲染进程的运行环境与普通网页类似，但默认无法直接访问Node.js API（出于安全考虑）。若需在渲染进程中使用Node.js功能，需通过预加载脚本（preload）和`contextBridge`暴露安全接口：
```javascript
// preload.js
const { contextBridge } = require('electron')
contextBridge.exposeInMainWorld('myAPI', { desktop: true })

// renderer.js
console.log(window.myAPI) // { desktop: true }
```