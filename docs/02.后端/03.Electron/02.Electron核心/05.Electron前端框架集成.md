---
title: Electron前端框架集成
date: 2025-10-20 14:42:49
permalink: /pages/dc4525/
categories:
  - 后端
tags:
  - Electron
  - Electron核心
---
Electron是一个使用JavaScript、HTML和CSS构建跨平台桌面应用程序的框架。它结合了Chromium渲染引擎和Node.js运行时，使开发者能够使用Web技术创建原生应用。以下是集成Electron前端框架的详细步骤：

## 基本设置

1. **初始化项目**
   ```bash
   mkdir my-electron-app
   cd my-electron-app
   npm init -y
   ```

2. **安装Electron**
   ```bash
   npm install --save-dev electron
   ```

3. **配置package.json**
   添加启动脚本：
   ```json
   "main": "main.js",
   "scripts": {
     "start": "electron ."
   }
   ```

## 创建主进程文件

创建`main.js`文件作为应用程序的入口点：

```javascript
const { app, BrowserWindow } = require('electron')
const path = require('path')

function createWindow () {
  const win = new BrowserWindow({
    width: 800,
    height: 600,
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })

  win.loadFile('index.html')
}

app.whenReady().then(() => {
  createWindow()

  app.on('activate', () => {
    if (BrowserWindow.getAllWindows().length === 0) {
      createWindow()
    }
  })
})

app.on('window-all-closed', () => {
  if (process.platform !== 'darwin') {
    app.quit()
  }
})
```

## 创建渲染进程

1. **创建HTML文件**
   创建`index.html`作为应用程序的UI：

   ```html
   <!DOCTYPE html>
   <html>
   <head>
     <meta charset="UTF-8">
     <title>我的Electron应用</title>
     <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'">
   </head>
   <body>
     <h1>你好，Electron!</h1>
   </body>
   </html>
   ```

2. **创建预加载脚本**
   创建`preload.js`用于安全地暴露Node.js功能给渲染进程：

   ```javascript
   const { contextBridge, ipcRenderer } = require('electron')

   contextBridge.exposeInMainWorld('electronAPI', {
     // 在这里暴露需要的功能
   })
   ```

## 集成前端框架

### React集成

1. **安装依赖**
   ```bash
   npm install react react-dom
   npm install --save-dev @babel/core @babel/preset-react @babel/preset-env babel-loader webpack webpack-cli webpack-dev-server html-webpack-plugin
   ```

2. **配置Webpack**
   创建`webpack.config.js`：

   ```javascript
   const path = require('path');
   const HtmlWebpackPlugin = require('html-webpack-plugin');

   module.exports = {
     mode: 'development',
     entry: './src/index.js',
     target: 'electron-renderer',
     output: {
       path: path.resolve(__dirname, './dist'),
       filename: 'bundle.js'
     },
     module: {
       rules: [
         {
           test: /\.js$/,
           exclude: /node_modules/,
           use: {
             loader: 'babel-loader',
             options: {
               presets: ['@babel/preset-env', '@babel/preset-react']
             }
           }
         }
       ]
     },
     plugins: [
       new HtmlWebpackPlugin({
         template: './src/index.html'
       })
     ],
     devServer: {
       port: 3000
     }
   };
   ```

3. **创建React组件**
   在`src`目录下创建React应用文件。

4. **修改主进程**
   更新`main.js`以加载React应用：

   ```javascript
   win.loadURL('http://localhost:3000');
   ```

### Vue集成

1. **安装依赖**
   ```bash
   npm install vue
   npm install --save-dev @vue/cli-service
   ```

2. **创建Vue项目**
   ```bash
   npx vue create .
   ```

3. **修改主进程**
   更新`main.js`以加载Vue应用：

   ```javascript
   win.loadURL('http://localhost:8080');
   ```

## Electron-vite 集成
可以通过附加的命令行选项直接指定项目名称和你想要使用的模板。例如，要构建一个 Electron + Vue 项目，运行:
```bash
npm create @quick-start/electron@latest my-app -- --template vue
```
目前支持的模板有vue和react等。

通过以上步骤，你可以成功地将Electron与各种前端框架集成，创建功能丰富的桌面应用程序。