---
title: 为什么需要深浅拷贝
date: 2021-04-07 16:35:02
permalink: /fe/ade1c0/
categories:
  - 前端
tags:
  - JavaScript
  - 深浅拷贝
---
## 前言
JS 已经有了赋值操作，为什么还需要深浅拷贝来完成值的赋值呢？因为赋值操作有很多的限制

## 赋值操作缺陷
从内存空间知识中，我们认识到引用数据类型存放在栈中，它的引用地址存放在栈中。当将引用数据类型进行赋值操作时，赋值的起始是存放在栈中的引用地址，这个时候，就会存在赋值操作缺陷。

举个例子
```javascript
var a = { value: 1 };
var b = a;
b.value = 2;
console.log(a.value); // 2
```
这里变量 a 赋值给 b，起始赋值的是对象 `{ value: 1 }` 的地址，那么 a 和 b 都指向了这个对象，当改变 b 的 value 属性时，该变量存放在堆中该对象的 value 值。而 a 指向了这个对象，导致 a 的 value 产生变化。

其实质就是引用数据类型进行赋值操作时赋值的是对象地址，相关的变量一起指向这个对象，有一个变量更改这个变量，所有变量都会发生改变。

## 深浅拷贝的意义
深浅拷贝就是解决上述的问题的，所以深浅拷贝都是针对的 Object 或 Array 这样的引用数据的。它是怎么解决问题的呢？

很简单粗暴，深浅拷贝会生成新的对象，这个对象是原对象的拷贝品，只不过浅拷贝是外在拷贝，而深拷贝是完全拷贝。在后续操作原对象时，就会转为操作原对象的拷贝品，比如赋值的时候就会是拷贝品的地址，而不是原对象的地址。这样，通过深浅拷贝就会消减或消除对象原对象的影响。
