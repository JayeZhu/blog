---
title: 深拷贝
date: 2021-04-07 16:59:54
permalink: /fe/be6b81/
categories:
  - 前端
tags:
  - JavaScript
  - 深浅拷贝
---
## 定义
深拷贝是将一个对象从内存中完整的拷贝一份出来，从堆内存中开辟一个新的区域存放新对象。

## 深拷贝的实现方式
### JSON.parse(JSON.stringify())
```javascript
var a = [1, 2, { value: 1 }];
var b = JSON.parse(JSON.strigify(a));
b[2].value = 2;
console.log(a[2].value); // 1
```
优点：非常简便

缺点：无法处理函数、正则

### lodash 的 _.cloneDeep
```javascript
var _ = require('lodash');

var a = [1, 2, { value: 1 }];
var b = _.cloneDeep(a);
b[2].value = 2;
console.log(a[2].value); // 1
```

### jQuery.extend()
```javascript
var $ = require('jquery');

var a = [1, 2, { value: 1 }];
var b = _.cloneDeep(a);
b[2].value = 2;
console.log(a[2].value); // 1
```

## 手写深拷贝
```javascript
function deepClone (object) {
  if (!object || typeof object !== 'object') return;
  let newObject = Array.isArray(object) ? [] : {};

  for (let key in object) {
    if (object.hasOwnproperty(key)) {
      newObject[key] = typeof object[key] === 'object' ? deepClone(object[key]) : object[key];
    }
  }
  return newObject;
}
```