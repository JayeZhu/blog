---
title: JS运算符
date: 2021-03-26 10:35:25
permalink: /fe/096926/
categories:
  - 前端
tags:
  - JavaScript
  - JS基础
---
操作符主要讲特殊规则
## 一元操作符
- 递增/递减：会返回递增或递减的值，但前缀相比后缀，变量的值会在语句求值前改变，而后缀在语句求值之后改变
- 一元加和减：非数值操作时，会使用 Number() 转型函数

## 位操作符
这部分很硬核，看看就好，后面再慢慢掌握
### 按位非(`~`)
作用是返回数值的一补数，最终效果是对数值取反并减一，相比正常操作来说，基于底层操作的按位非速度更快
```javascript
let num = 6;
console.log(~num); // -7
```

### 按位与(`&`)
作用是将两个数的每一位对齐，然后基于真值表中的规则，对每一位执行响应的与操作。最终效果，两个位都是 1 时返回 1，在任何一位是 0 时返回 0.
```javascript
let res = 25 & 3;
console.log(res) // 1
// 25 => 0000 0000 0000 0000 0000 0000 0001 1001
// 3  => 0000 0000 0000 0000 0000 0000 0000 0011
// AND=> 0000 0000 0000 0000 0000 0000 0000 0001
```

### 按位或(`|`)
至少一位是 1 时返回 1，两位是 0 时返回 0；
```javascript
let res = 25 | 3;
console.log(res) // 27
// 25 => 0000 0000 0000 0000 0000 0000 0001 1001
// 3  => 0000 0000 0000 0000 0000 0000 0000 0011
// AND=> 0000 0000 0000 0000 0000 0000 0001 1011
```

### 按位异或(`^`)
只在一位上是 1 的时候返回 1
```javascript
let res = 25 ^ 3;
console.log(res) // 26
// 25 => 0000 0000 0000 0000 0000 0000 0001 1001
// 3  => 0000 0000 0000 0000 0000 0000 0000 0011
// AND=> 0000 0000 0000 0000 0000 0000 0001 1010
```

### 左移(`<<`)
会按照指定的位数将数值的所有位向左移动
```javascript
let num = 3; // 二进制 11
console.log(num << 5) // 96
// 1100000 => 96
```

### 有符号右移(`>>`)
左移的逆运算：将数值的 32 位向右移动，保留正负符号
```javascript
let num = 96; // 二进制 1100000
console.log(num >> 5) // 3
// 11 => 96
```

### 无符号右移(`>>>`)
与有符号右移不同，无符号右移会给空位补 0，在处理负数时，与有符号右移结果不同
```JavaScript
let num = -96; // 1111 1111 1111 1111 1111 1111 1101 0000
console.log(num >>> 5); // 134217725
// 0000 0111 1111 1111 1111 1111 1111 1101
```

## 布尔操作符
布尔操作符共“与或非”三种

### 逻辑非(`!`)
会将操作符根据 Boolean() 转换为布尔值，然后取反

### 逻辑与(`&&`)
逻辑与由两个和号（&&）表示，但返回的不一定是布尔值，有以下规则
- 两操作数都是布尔值时，全真为真，遇假为假
- 当第一个操作数为对象就返回第二个操作数
- 当第二个操作数为对象时，只有第一个操作数求值为 true，才会返回对象
- 如果有操作数为 null\NaN\undefined，则返回该操作数

### 逻辑或(`||`)
- 两操作数都是布尔值时，全假为假，遇真为真
- 第一个操作数求值为 false，返回第二个操作数
- 第一个操作数为对象，返回该对象
- 两个操作数为 null\NaN\undefined，返回这些值

## 乘性操作符
乘性操作符共乘法、除法、取模三种操作符，非数值操作数，通过 Number() 转换为数值再计算

### 乘法操作符(`*`)
|被乘数|乘数|返回|
|-|-|-|
|数值|数值|积或正负 Infinity|
|NaN|其他|NaN|
|其他|NaN|NaN|
|NaN|NaN|NaN|
|Infinity|0|NaN|
|Infinity|非 0 的有限数值|正负形式的 Infinity|
|Infinity|Infinity|Infinity|

### 除法操作符(`/`)
|被除数|除数|返回|
|-|-|-|
|数值|数值|商或正负 Infinity|
|NaN|其他|NaN|
|其他|NaN|NaN|
|NaN|NaN|NaN|
|0|0|0|
|非 0 的有限值|0|正负 Infinity|
|Infinity|其他|正负 Infinity|

### 取模操作符(`%`)
|被除数|除数|返回|
|-|-|-|
|数值|数值|余数|
|Infinity|有限值|NaN|
|有限值|0|NaN|
|Infinity|Infinity|NaN|
|有限值|Infinity|被除数|

## 指数操作符
ES7 新增 `**` 操作符替代 Math.pow()
```javascript
console.log(Math.pow(3, 2) // 9
console.log(3 ** 2) // 9
```

## 加性操作符
### 加法操作符(`+`)
|被加数|加数|返回|
|-|-|-|
|数值|数值|和|
|NaN|其他|NaN|
|其他|NaN|NaN|
|NaN|NaN|NaN|
|Infinity|Infinity|Infinity|
|-Infinity|-Infinity|-Infinity|
|Infinity|-Infinity|NaN|
|+0|+0|+0|
|-0|+0|+0|
|-0|-0|-0|

```!
如果有操作数是非 Number 类型，存在规则：
- 两数为字符串，后者拼接到前者末尾
- 其一为字符串，将另一操作数转换为字符串，再拼接
- 其一为对象、数值或布尔值，调用该值的 toString() 方法获取字符串，再计算
```

### 减性操作符(`-`)
|被减数|减数|返回|
|-|-|-|
|数值|数值|差|
|NaN|其他|NaN|
|其他|NaN|NaN|
|NaN|NaN|NaN|
|Infinity|Infinity|NaN|
|-Infinity|-Infinity|NaN|
|Infinity|-Infinity|Infinity|
|-Infinity|Infinity|-Infinity|
|+0|+0|+0|
|+0|-0|-0|
|-0|-0|+0|

```!
如果有操作数是非 Number 类型，存在规则：
- 其一为字符串、布尔值、null、undefined，先在后台使用 Number() 转换为数值，再计算
- 其一为对象，先调用 valueOf 转数值，如果没有该方法就调用 toString() 方法，再根据规则计算
```

## 关系操作符(`<`、`>`、`<=`、`>=`)
- 操作数都是数值，进行比较
- 操作数都是字符串，逐个比较字符串中对应字符的编码
- 操作数有数值，则另一操作数执行 Number() 转化
- 操作数有对象，则调用对象的 valueOf() 取数值，没有 valueOf() 则调用 toString() 取字符串，再比较
- 操作数有布尔值，将布尔值转为数值，再比较

## 相等操作符
该操作符分为等于操作符和全等操作符
### 等于和不等于(`==`、`!=`)
- 操作符其一为布尔值，将其转为数值，再比较
- 操作符其一为字符串，另一操作符为数值，尝试将字符串转换为数值，再比较
- 操作符其一为对象，另一个操作符为非对象，调用对象的 valueOf()，如无调用 toString()，再比较
- `null == undefined`
- null 和 undefined 不能转换为其他值再进行比较
- 操作符其一为 NaN，则不相等
- 操作符皆对象，比较二者是否指向同一个对象

### 全等和不全等(`===`、`!==`)
全等操作符比较时不转换操作数，更为推荐使用

## 条件操作符
其实使用的是三元表达式，语法：
```javascript
variable = boolean_expression ? true-value : false_value;
```
`boolean_expression` 为真时，把 `true-value` 赋值给 `variable`，反之 将 `false-value` 赋值给 `false_value`。

## 赋值操作符
`num = num + 10` => `num += 10`，类似很多简写语法