---
title: JS变量类型
date: 2021-03-25 16:27:33
permalink: /fe/2a7254/
categories:
  - 前端
  - JavaScript
tags:
  - JS基础
---
## 内置类型
JS中内置类型有七种，又根据存储方式分为基本类型和引用类型

### 基本类型
- null
- undefined
- boolean
- number
- string
- symbol
- bigint

### 引用类型
引用类型指对象Object，其中包括：
- 普通对象：Object
- 函数对象：Function
- 数组对象：Array
- 正则对象：RegExp
- 时间对象：Date
- 数学对象：Math

## 类型检测
js 可通过 typeof 和 instanceof 检测数据类型

### typeof
typeof 可用于检测基本类型
```javascript
const a = 'a';
console.log(typeof a); // "string"

const b = Symbol('b');
console.log(typeof b); // "symbol"

const c = null;
console.log(typeof c); // "object"

const d = new Date();
console.log(typeof d); // "object"
```
typeof 还可检测函数
```javascript
const e = function () {};
console.log(typeof e); // "function"
```
由上可见，typeof 存在缺点：
- 无法检测 null 类型，识别为 object
- 无法更加细分对象类型，除 function 外统一识别为 object

### instanceof
instanceof 利用的是 js 原型链实现检测引用类型
```javascript
const a = new Date();
console.log(a instanceof Date); // true

const b = 'b';
console.log(a instanceof Date); // false

const c = String('c');
console.log(c instanceof Date); // false

const d = new String('d');
console.log(d instanceof Date); // true
```
这里有个奇怪的点，b、c、d 按道理说都是字符串，为什么只有 d 能被 instanceof 识别呢？
其实三者是有区别的，我们用 typeof 打印一下
```javascript
console.log(typeof b); // "string"
console.log(typeof c); // "string"
console.log(typeof d); // "object"
```
- 'b' 是基本数据类型，不能检测
- String('c') 也是基本数据类型，不能检测
- new String('d') 是引用数据类型，可以检测
```!
String 是原始包装类型，在不使用 new 构造实例的情况下，单独使用，生成的是基本数据类型，
而使用 new 的情况下，生成的实例时引用数据类型的
```

## 数据类型转换
JS 变量没有指定数据类型，因此不经意间就会发生类型转换，当然也可以强行转换（也就是隐式转换和显式转换），
用到的主要是 String()、Number()、Boolean() 等构造函数将数据类型进行转换

### 转换为字符串
|被转类型|转换结果|
|-|-|
|number 或 bigint|number 的字符串形式|
|null|"null"|
|undefined|"undefined"|
|boolean|true->"true",false->"false"|
|symbol|symbol 的字符串形式|
|object|执行 object 的 toString() 方法|
其中 object 根据对象类型不同而返回不同结果：
- 如果有自定义 toString()，则执行并返回结果
- Array 默认返回一个字符串，将数组扁平，每个元素被 String() 转换后用逗号连接
- Function 默认返回当前函数源代码的字符串
- RegExp 默认返回自身的字符串值

### 转换为数值
|被转类型|转换结果|
|-|-|
|string|""->0，有非数字或数值字符->NaN，否则转为数字|
|boolean|true->1，false->0|
|null|0|
|undefined|NaN|
|bigint|去除n|
|symbol|报错Uncaught TypeError: Cannot convert a Symbol value to a number|
|object|执行 ToPrimitive，即先执行 valueOf()，如果返回基本类型就再转化，否则执行 toString()，如果返回基本类型就转化，否则报错|

### 转换为布尔值
除了以下假值，其他都是真值：
- 0、-0、+0、NaN
- 0n、-0n、+0n
- ""
- null
- undefined
- document.all
- false