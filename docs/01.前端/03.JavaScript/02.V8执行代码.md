---
title: V8执行代码
date: 2021-04-05 15:18:04
permalink: /fe/d4489a/
categories:
  - 前端
tags:
  - JavaScript
  - V8
---
## 前言
js 是解释型语言，机器是无法读懂的，需要通过 V8 引擎做翻译工作后才能执行，共分为以下步骤
## 生成AST
AST：即抽象语法树,编译器后续依靠 AST 进行工作。
这个部分分为词法分析和语法分析

- 词法分析：将一行行代码分解成一个个 token
- 语法分析：将 token 根据语法规则转化为 AST

这个部分还会生成执行上下文，下文会讲解。
## 生成字节码
字节码：介于 AST 和机器码之间的代码，比传统机器码更加轻量，通过解释器转换为机器码执行。
V8 的解释器在接收到 AST 后将其转换为 字节码，而不需要直接将全部字节码转换为机器码，降低内存压力。
## 执行代码
该阶段字节码被解释器逐行执行。并采用即时编译(JIT)，提高执行效率。
即时编译，是将部分重复出现的代码打上热点标记，这部分代码由优化编译器提前编译为二进制。当再遇到这部分代码时，就直接执行编译而成的二进制，从而提高执行速率。
