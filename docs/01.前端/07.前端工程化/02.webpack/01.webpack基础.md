---
title: webpack基础
date: 2021-06-08 22:17:49
permalink: /pages/6f3a4a/
categories:
  - 前端
tags:
  - 前端工程化
  - webpack
---

## 概念
webpack 是 JS 应用程序的静态模块打包器。当 webpack 处理应用程序时，它在内部构件一个依赖图，途中包含应用程序需要的每个模块，最后将这些模块打包成一个会多个 bundle

## 核心
核心包括：
- entry：入口
- output：输出
- loader：模块转换器
- plugins：插件

### entry
> 入口起点表明 webpack 使用那些模块作为构建内部依赖图的开始

```js
// webpack.config.js
module.exports = {
  entry: './src/index.js' // 默认
}
```
也可以设置多入口
```js
module.exports = {
  entry: {
    app: './src/main.js',
    another: './src/another.js'
  }
}
```

### output
> 通过配置 output 选项，告知 webpack 如何想硬盘写入变异文件，只能指定一个 output 配置

```js
// webpack.config.js
module.exports = {
  output: {
    filename: 'bundle.js'
  }
}
```
针对多入口
```js
module.exports = {
  entry: {
    app: './src/main.js',
    another: './src/another.js'
  },
  output: {
    filename: '[name].js',
    path: __dirname + 'dist',
  }
}
```
针对 CDN 和 hash 的复杂实例
```js
module.exports = {
  output: {
    path: '/home/proj/cdn/assets/[fullhash]',
    publicPath: 'https://cdn.example.com.assets/[fullhash]',
  }
}
```

### loader
> loader 用于对模块的源代码进行转换

webpack 只能处理 js，需要其他的 loader 来处理除 js 以外的文件。

想要使用 loader，首先需要本地安装
```
npm i --save-dev style-loader css-loader
```
接着在 module 的 rules 中定义
```js
// webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/, // 正则获取末端为 .css，即获取 css 文件
        // webpack 读取 loader 从右往左，从下往上
        // 先处理 css，再生成 style 元素，因此 style-loader 在前
        use: ['style-loader', 'css-loader']
      }
    ]
  }
}
```
除了这种配置方法外，还可以使用内联方式使用 loader