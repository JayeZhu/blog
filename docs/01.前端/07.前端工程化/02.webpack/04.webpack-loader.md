---
title: webpack-loader
date: 2021-06-09 17:03:20
permalink: /pages/69fc08/
categories:
  - å‰ç«¯
tags:
  - webpack
  - å‰ç«¯å·¥ç¨‹åŒ–
---
## æ¦‚å¿µ
> loader ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢

webpack åªèƒ½å¤„ç† jsï¼Œéœ€è¦å…¶ä»–çš„ loader æ¥å¤„ç†é™¤ js ä»¥å¤–çš„æ–‡ä»¶ã€‚

## ä½¿ç”¨
loader éœ€è¦å®‰è£…åˆ°æœ¬åœ°
```
npm i --save-dev style-loader css-loader
```
ä½¿ç”¨ loader æœ‰ä¸‰ç§æ–¹å¼ï¼š
- é…ç½®ï¼šmodule.rules å¯ä»¥é…ç½®å¤šä¸ª loaderï¼Œå¾ˆç®€æ´
  ```js
  // webpack.config.js
  module.exports = {
    module: {
      rules: [
        {
          test: /\.css$/, // æ­£åˆ™è·å–æœ«ç«¯ä¸º .cssï¼Œå³è·å– css æ–‡ä»¶
          // webpack è¯»å– loader ä»å³å¾€å·¦ï¼Œä»ä¸‹å¾€ä¸Š
          // å…ˆå¤„ç† cssï¼Œå†ç”Ÿæˆ style å…ƒç´ ï¼Œå› æ­¤ style-loader åœ¨å‰
          use: ['style-loader', 'css-loader']
        }
      ]
    }
  }
  ```
- å†…è”ï¼šä½¿ç”¨ import æˆ–ä»»ä½•ç­‰æ•ˆäº import çš„æ–¹å¼æŒ‡å®š loaderï¼Œä½¿ç”¨ ! å°† loader åˆ†å¼€
  ```js
  import Styles from 'style-loader!css-loader?modules!./styles.css';
  ```
  åé¢ `?modules!./styles.css` æ˜¯ä¼ å‚ã€‚

  > å°½å¯èƒ½ä½¿ç”¨ module.rulesï¼Œå‡å°‘æºç ä¸­çš„ä»£ç é‡ï¼Œå‡ºé”™æ—¶å¿«é€Ÿè°ƒè¯•å’Œå®šä½
- CLIï¼šåœ¨ package.json çš„ è„šæœ¬ä¸­æ·»åŠ 
  ```
  webpack --module-bind jade-loader --module-bind 'css=style-loader!css-loader'
  ```
  è¿™ä¼šå¯¹ .jade ä½¿ç”¨ jade-loaderï¼Œå¯¹ .css ä½¿ç”¨ style-loader å’Œ css-loader

## æ–‡ä»¶
### raw-loader
åŠ è½½æ–‡ä»¶åŸå§‹å†…å®¹ï¼ˆutf-8ï¼‰
```js
// webpack.config.js
module.exports = {
  modlue: {
    rules: [
      {
        test: /.txt$/,
        use: 'raw-loader'
      }
    ]
  }
}
```
### file-loader
æŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶ (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)
#### js åŠ è½½å›¾ç‰‡
- import å¯¼å…¥å›¾ç‰‡
  ```js
  import img from './assets/file.png'
  ```
  ```js
  // webpack.config.js
  module.exports = {
    modlue: {
      rules: [
        {
          test: /.(png|svg|jpg|gif)$/,
          use: 'file-loader'
        }
      ]
    }
  }
  ```
  å¾—åˆ°å›¾ç‰‡ç›¸å¯¹è·¯å¾„
- require å¼•å…¥å›¾ç‰‡
  ```js
  const img = require('./assets/file.png')
  ```
  ä¼šå¾—åˆ°æ¨¡å—å¯¹è±¡
  ```js
  Module{ defalut: '4sj89003nknkdsdf.png' }
  ```
  éœ€è¦è®¾ç½®å‚æ•° options.esModule æ‰ä¼šå¾—åˆ°ç›¸å¯¹è·¯å¾„
  ```js
  // webpack.config.js
  module.exports = {
    modlue: {
      rules: [
        {
          test: /.(png|svg|jpg|gif)$/,
          use: [
            {
              loader: 'file-loader',
              options: {
                esModule: false
              }
            }
          ]
        }
      ]
    }
  }
  ```
#### html åŠ è½½å›¾ç‰‡
åœ¨htmlä¸­åŠ è½½ä¸€å¼ å›¾ç‰‡:
```html
<img src="./assets/file.png" />
```
è¿™é‡Œé»˜è®¤åº”è¯¥æ˜¯ä»¥CommonJSçš„åŠ è½½æ–¹å¼åŠ è½½çš„, æ‰€ä»¥éœ€è¦é…ç½®options.esModuleä¸ºfalse, å¦‚ä¸Šé¢ğŸ‘†.

### url-loader
ä¸ file-loader ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¤§äºé˜ˆå€¼ä¼šäº¤ç»™file-loaderå¤„ç†ï¼Œå°äºé˜ˆå€¼æ—¶è¿”å›æ–‡ä»¶ base64 å½¢å¼ç¼–ç  (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)

#### åŸºæœ¬ç”¨æ³•
```js
import img from './assets/file.png' // base64æ ¼å¼
const img from './assets/file.png' // Module: { default: data:image/png;base64... }
```
```html
<img src="./assets/file.png" > // <img src="[object Module]" />
```
```js
// webpack.config.js
module.exports = {
  modlue: {
    rules: [
      {
        test: /.(png|svg|jpg|gif)$/,
        use: [
          {
            loader: 'url-loader',
          }
        ]
      }
    ]
  }
}
```

#### å‚æ•° limit
é»˜è®¤æƒ…å†µä¸‹å®ƒæœ‰ä¸€ä¸ªå‚æ•°limitæ˜¯ä¸ºundefinedçš„, æ­¤æ—¶è·å–æ–‡ä»¶è¿”å›çš„æ˜¯base64æ ¼å¼(ä¹Ÿå°±æ˜¯dataURL).

ä½†å¦‚æœè®¾ç½®äº†limit(å•ä½ä¸ºK)åŒæ—¶æ–‡ä»¶çš„å¤§å°è¶…è¿‡äº†è¿™ä¸ªlimitçš„è¯, å°±å’Œfile-loaderä¸€æ ·è¿”å›bundleä¸­çš„ç›¸å¯¹è·¯å¾„.

- ä¸è®¾ç½®limit, è¿”å›base64æ ¼å¼
- è®¾ç½®äº†limit, å°äºè¯¥å€¼, è¿”å›base64æ ¼å¼
- è®¾ç½®äº†limit, å¤§äºè¯¥å€¼, äº¤ç»™file-loaderå¤„ç†, å¦‚æœæ²¡æœ‰å®‰è£…é…ç½®file-loaderçš„è¯å°±ä¼šæŠ¥é”™

### source-map-loader
åŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•
### svg-inline-loader
å°†å‹ç¼©åçš„ SVG å†…å®¹æ³¨å…¥ä»£ç ä¸­
```js
// webpack.config.js
module.exports = {
  modlue: {
    rules: [
      {
        test: /.svg$/,
        use: 'svg-inline-loader?classPrefix'
      }
    ]
  }
}
```
```js
const svg = require('./assets/add-icon.svg')
console.log(svg);
// <svg version="1.1" id="å›¾å±‚_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" style="enable-background:new 0 0 16 16;" xml:space="preserve"><style type="text/css"> .fnCkiuXst0{fill-rule:evenodd;clip-rule:evenodd;fill:#888888;} </style><g><g><polygon class="fnCkiuXst0 " points="13,7 9,7 9,3 7,3 7,7 3,7 3,9 7,9 7,13 9,13 9,9 13,9 "></polygon></g></g></svg>
```

### image-loader
åŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶
### json-loader
åŠ è½½ JSON æ–‡ä»¶ï¼ˆé»˜è®¤åŒ…å«ï¼‰

## è¯­æ³•è½¬æ¢
### babel-loader
ä½¿ç”¨ Babel åŠ è½½ ES2015+ ä»£ç å¹¶å°†å…¶è½¬æ¢ä¸º ES5ï¼Œæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ loader




### ts-loader
åƒåŠ è½½ JavaScript ä¸€æ ·åŠ è½½ TypeScript 2.0+

éœ€è¦å®‰è£… ts-loader å’Œ typescript
```bash
cnpm i --save-dev ts-loader typescript
```

éœ€è¦åœ¨æ ¹ç›®å½•åˆ›å»º tsconfig.json
```
{
  "compilerOptions": {
    "sourceMap": true
  }
}
```
è®¾ç½®
```js
// webpack.config.js
module.exports = {
  resolve: {
    extensions: [".ts", ".tsx", ".js"]
  },
  module: {
    rules: [
      { test: /\.tsx?$/, loader: "ts-loader" }
    ]
  }
};
```
### awesome-typescript-loader
å°† TypeScript è½¬æ¢æˆ JavaScriptï¼Œæ€§èƒ½ä¼˜äº ts-loader

åŒæ ·éœ€è¦åˆ›å»º tsconfig.json
```
{
  "compilerOptions": {
    "noImplicitAny": true,
    "removeComments": true
  },
  "awesomeTypescriptLoaderOptions": {
    /* ... */
  }
}
```
è®¾ç½®
```js
const { CheckerPlugin } = require('awesome-typescript-loader')
 
module.exports = {
  resolve: {
    extensions: ['.ts', '.tsx', '.js', '.jsx']
  },
  devtool: 'source-map',
  module: {
    rules: [
      {
        test: /\.tsx?$/,
        loader: 'awesome-typescript-loader'
      }
    ]
  },
  plugins: [
    new CheckerPlugin()
  ]
};
```

## è¯­æ³•æ£€æŸ¥
- eslint-loaderï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç 
- tslint-loaderï¼šé€šè¿‡ TSLintæ£€æŸ¥ TypeScript ä»£ç 

## æ¨¡æ¿
### html-loader
å°† HTML å¯¼å‡ºä¸ºå­—ç¬¦ä¸²ï¼Œéœ€è¦ä¼ å…¥é™æ€èµ„æºçš„å¼•ç”¨è·¯å¾„
å®‰è£…å®ƒ:
```bash
$ cnpm i html-loader --save-dev
```
ä½¿ç”¨å®ƒ:
```js
// src/index.js
var fileHtml = require('html-loader!./assets/file.html')
console.log(fileHtml) // '<img src="[object Module]" data-src="fileJpg.jpg" />'
```
### pug-loader
åŠ è½½ Pug å’Œ Jade æ¨¡æ¿å¹¶è¿”å›ä¸€ä¸ªå‡½æ•°
### markdown-loader
å°† Markdown ç¼–è¯‘ä¸º HTML
### react-markdown-loader
ä½¿ç”¨ markdown-parse è§£æå™¨å°† Markdown ç¼–è¯‘ä¸º React ç»„ä»¶
### posthtml-loader
ä½¿ç”¨ PostHTML åŠ è½½å¹¶è½¬æ¢ HTML æ–‡ä»¶
### handlebars-loader
å°† Handlebars æ–‡ä»¶ç¼–è¯‘ä¸º HTML
### markup-inline-loader
å°† SVG/MathML æ–‡ä»¶å†…åµŒåˆ° HTML ä¸­ã€‚åœ¨å°†å›¾æ ‡å­—ä½“æˆ– CSS åŠ¨ç”»åº”ç”¨äº SVG æ—¶ï¼Œæ­¤åŠŸèƒ½éå¸¸å®ç”¨ã€‚
### twig-loader
ç¼–è¯‘ Twig æ¨¡æ¿å¹¶è¿”å›ä¸€ä¸ªå‡½æ•°
### remark-loader
é€šè¿‡ remark åŠ è½½ markdownï¼Œä¸”æ”¯æŒè§£æå†…å®¹ä¸­çš„å›¾ç‰‡

## æ ·å¼
### style-loader
å°†æ¨¡å—å¯¼å‡ºçš„å†…å®¹ä½œä¸ºæ ·å¼å¹¶æ·»åŠ åˆ° DOM ä¸­ï¼Œä½¿ç”¨ç¯‡æœ‰æåŠ
### css-loader
åŠ è½½ CSS æ–‡ä»¶å¹¶è§£æ import çš„ CSS æ–‡ä»¶ï¼Œæœ€ç»ˆè¿”å› CSS ä»£ç 
### less-loader
åŠ è½½å¹¶ç¼–è¯‘ LESS æ–‡ä»¶
### sass-loader
åŠ è½½å¹¶ç¼–è¯‘ SASS/SCSS æ–‡ä»¶
### stylus-loader
åŠ è½½å¹¶ç¼–è¯‘ Stylus æ–‡ä»¶
### postcss-loader
ä½¿ç”¨ PostCSS åŠ è½½å¹¶è½¬æ¢ CSS/SSS æ–‡ä»¶

## æµ‹è¯•
mocha-loader ä½¿ç”¨ mocha (Browser/NodeJS) è¿›è¡Œæµ‹è¯•

## æ¡†æ¶
- vue-loader åŠ è½½å¹¶ç¼–è¯‘ Vue ç»„ä»¶
- angular2-template-loader åŠ è½½å¹¶ç¼–è¯‘ Angular ç»„ä»¶

## å‚è€ƒ
- [webpack-loader](https://webpack.docschina.org/loaders/)
- [Webpacké¢è¯•é¢˜æ•´ç†](https://hungryturbo.com/pages/e7c817/#_12-%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96-webpack-%E7%9A%84%E6%9E%84%E5%BB%BA%E9%80%9F%E5%BA%A6%EF%BC%9F)
- [éœ–å‘†å‘†çš„webpackä¹‹è·¯-loaderç¯‡](https://github.com/LinDaiDai/niubility-coding-js/blob/master/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack/%E9%9C%96%E5%91%86%E5%91%86%E7%9A%84webpack%E4%B9%8B%E8%B7%AF-loader%E7%AF%87.md)