---
title: TS对象类型
date: 2025-10-10 08:39:29
permalink: /pages/abb18e/
categories:
  - 前端
  - TypeScript
  - TS基础
tags:
  - 
---
:::tip
在Typescript中，对象、数组、元组、枚举和函数等复杂数据类型是引用类型，他们的值存储在堆内存中，变量存储的是指向这些值的引用（指针）。这种特性带来了与原始类型完全不同的类型和注意事项。
:::
## 对象类型
对象类型是引用类型的基石
### 对象的基础特性
```ts
// 对象字面量类型
let person: { 
  name: string; 
  age: number; 
  address: { city: string; street: string } // 嵌套对象
} = {
  name: "JayeZhu",
  age: 25,
  address: {
    city: "Beijing",
    street: "Main St"
  }
};

// 引用特性演示
let person2 = person; // person2 和 person 指向同一个对象
person2.name = "Alice";
console.log(person.name); // "Alice" - 原对象也被修改

// 对象比较的是引用，而不是内容
let person3 = { name: "JayeZhu", age: 25 };
console.log(person === person3); // false - 尽管内容相同，但引用不同
```

### 接口定义对象结构
```ts
// 使用接口定义对象结构
interface User {
  id: number;
  name: string;
  email?: string; // 可选属性
  readonly createdAt: Date; // 只读属性
}

// 创建对象实例
const user: User = {
  id: 1,
  name: "JayeZhu",
  createdAt: new Date()
};

// user.createdAt = new Date(); // 错误：无法分配到只读属性

// 引用传递示例
function updateUserName(user: User, newName: string): void {
  user.name = newName; // 修改的是原始对象
}

updateUserName(user, "Alice");
console.log(user.name); // "Alice" - 原对象被修改
```

## 数组
数组是有序引用集合

### 数组基本用法
```ts
// 数组类型声明
let numbers: number[] = [1, 2, 3, 4, 5];
let strings: Array<string> = ["a", "b", "c"]; // 泛型语法

// 引用特性演示
let numbersCopy = numbers; // 指向同一个数组
numbersCopy.push(6);
console.log(numbers); // [1, 2, 3, 4, 5, 6] - 原数组也被修改

// 数组比较的是引用
let anotherNumbers = [1, 2, 3, 4, 5, 6];
console.log(numbers === anotherNumbers); // false - 引用不同

// 创建真正的副本
let numbersClone = [...numbers]; // 展开运算符创建新数组
console.log(numbers === numbersClone); // false - 引用不同
```

### 多维数组和复杂结构
```ts
// 二维数组
let matrix: number[][] = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

// 对象数组
interface Product {
  id: number;
  name: string;
  price: number;
}

let products: Product[] = [
  { id: 1, name: "Laptop", price: 999 },
  { id: 2, name: "Mouse", price: 25 },
  { id: 3, name: "Keyboard", price: 75 }
];

// 引用特性在数组中的表现
let productsRef = products;
productsRef[0].price = 1099;
console.log(products[0].price); // 1099 - 原数组中的对象被修改
```

## 元组
元组是固定结构的引用集合

### 元组的基本用法
```ts
// 基本元组
let person: [string, number] = ["JayeZhu", 18];

// 带标签的元组
let user: [name: string, age: number, active: boolean] = ["JayeZhu", 18. true];

// 可选元素的元组
let optionalTuple: [string, number?] = ["check"];
optionalTuple = ["checked", 42];

// 引用特性
let tupleCopy = person; // 指向同一元组
tupleCopy[0] = "Tom";
console.log(person[0]); // "Alice" - 原元组也被修改
```

### 元组的实际应用
```ts
// 函数返回多个值
function getCoordinates(): [number, number] {
  return [40.7128, -74.0060];
}

const [lat, lng] = getCoordinates();

// React useState Hook 的元组返回类型
type useState<T> = [T, (value: T) => void];

function useState<T>(initialValue: T): useState<T> {
  let value = initialValue;
  const setValue = (newValue: T) => {
    value = newValue;
  };
  return [value, setValue];
}

const [count, setCount] = useState(0);
```

## 枚举
枚举是命名常量集合

### 枚举的基本用法
```ts
// 数字枚举
enum StatusCode {
  Success = 200,
  BadRequest = 400,
  Unauthorized = 401,
  NotFound = 404
}

// 字符串枚举
enum Direction {
  North = "NORTH",
  South = "SOUTH",
  East = "EAST",
  West = "WEST"
}

// 常量枚举（编译时内联）
const enum Colors {
  Red,
  Green,
  Blue
}

let color = Colors.Red; // 编译后: let color = 0;
```

### 枚举的引用特性
```ts
// 数字枚举
enum StatusCode {
  Success = 200,
  BadRequest = 400,
  Unauthorized = 401,
  NotFound = 404
}

// 字符串枚举
enum Direction {
  North = "NORTH",
  South = "SOUTH",
  East = "EAST",
  West = "WEST"
}

// 常量枚举（编译时内联）
const enum Colors {
  Red,
  Green,
  Blue
}

let color = Colors.Red; // 编译后: let color = 0;
```

## 函数
函数是可执行的引用

### 函数的基本用法
```ts
// 函数类型表达式
type MathOperation = (a: number, b: number) => number;

// 函数声明
const add: MathOperation = (a, b) => a + b;
const multiply: MathOperation = (a, b) => a * b;

// 函数作为对象属性
interface Calculator {
  add: (a: number, b: number) => number;
  subtract: MathOperation;
  multiply(a: number, b: number): number; // 简写语法
}

const calc: Calculator = {
  add: (a, b) => a + b,
  subtract: (a, b) => a - b,
  multiply: (a, b) => a * b
};
```

### 函数的引用特性
```ts
// 函数也是对象，按引用传递
function greet(name: string): string {
  return `Hello, ${name}!`;
}

let greeter = greet; // 指向同一个函数
console.log(greeter === greet); // true

// 高阶函数：函数作为参数或返回值
function createMultiplier(factor: number): (x: number) => number {
  return (x: number) => x * factor;
}

const double = createMultiplier(2);
const triple = createMultiplier(3);

console.log(double(5)); // 10
console.log(triple(5)); // 15

// 闭包中的引用
function createCounter(): () => number {
  let count = 0; // 这个变量被闭包引用
  return () => ++count;
}

const counter = createCounter();
console.log(counter()); // 1
console.log(counter()); // 2 - 闭包保持了对count变量的引用
```